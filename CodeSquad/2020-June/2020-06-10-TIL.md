# 2020-06-10-TIL

## 오늘 할 일

- [ ] TDD 강의 듣기
- [ ] Mock API 개발
- [ ] DB ERD 작성
- [ ] C4 Model 작성
- [ ] README 단장하기
- [ ] 알고리즘 문제풀기
- [ ] 스프링 백기선님 강의 듣기
- [ ] Brian 과제 Things에 추가하기

## TDD 강의 듣기

반란군을 키우는 포비의 의미는 극단적으로 생각하는 경향이 있기 때문...

오늘의 강의 주제는 TDD임.

지금 바로 해도 괜찮고, 몇 년의 시간이 지난 후에 도전거리를 찾을 때 해봐도 좋다.

### TDD란?

TDD = TFD(Test First Development) + Refactoring

Test Code를 Production Code보다 먼저 만든다.

### TDD의 사이클

실패하는 테스트를 만들고, 테스트를 통과하게 만들고, 리팩토링한다.

테스트를 기반으로 해서 설계를 개선하고 발전시킨다.

### 질문 답변

Production Code도 없는데 테스트 코드를 먼저 만드는 것이 너무 어렵다.

⇒ 맞다. 초보자일 때 상당히 생소한 느낌이 있을 수 밖에 없다. 훈련이 필요한 부분이고, 훈련을 하고 나면 테스트 코드 없이 개발하는게 어색하게 느껴질 것이다.

시작하는 단계부터 TDD를 하는게 좋다고 생각한다. 개인의 성향에 따라 다르겠지만 시작부터 하면 좋은 점이 몸에 배이기 때문에 좋다. 개발하는 수준이 된다면, TDD에 도전해보는 것도 좋겠다.

---

TDD를 하려면 설계나 기능을 예측해야하는데, 그게 어렵다.

⇒ TDD로 처음부터 하지말고, 기능을 개발한 다음 그것을 검증하는 Unit test를 추가하는 연습부터 시작한다.

단위테스트 도구에 익숙해지기 전까지는 TDD보다는 Unit Test부터 만드는 연습을 하는게 좋을 것 같다.

### TDD 라이브 코딩

초간단 자동차 경주 게임

#### TDD를 한다면 어떻게 할까요?

메인메서드부터 사용자의 입력을 받아 개발하는 방식을 Out-In 방식이라고 한다.

#### TDD로 하려면 어려운 점이 무엇일까?

TDD는 단위 테스트를 기반으로 되기 때문에, Out-In 방식으로 하려고 하면 어렵다.

TDD는 가장 안쪽에 있는 클래스 부터 바깥쪽으로 진행되는 In-Out 방식으로 해야 쉽다.

가장 안쪽에 있는 메소드나 클래스를 찾는것이 초보자에겐 어렵다. ⇒ 설계

경험이 있는 사람이라면, MVC에서 Model 영역을 격리해서 설계할 것이다. 그러면 Domain 부분에서부터 시작하는 것이다.

TDD가 집중하고 싶은 것은 Model에 해당하는 영역의 단위 테스트를 집중하겠다는 것이다. 왜? 핵심 비즈니스 로직이 있으므로.

#### TDD를 할 때 가장 어려워하는 부분, 모든 부분에 대한 Unit Test를 만들려고 하기 때문에 힘들어한다.

View, Controller, Database 접근 로직을 가진 부분은 테스트하기 힘들다.

이런 부분들을 무시하고 테스트를 집중해야하는 핵심 비즈니스 로직에 단위 테스트를 집중해야한다.

근데 초보자는 이런 부분을 찾아내는 것이 어렵다.

#### 초보자일 때에는 어떻게 해야 할까?

객체 설계 경험이 많지 않다면, TDD를 하지 않으면 된다.

내가 TDD를 하고 싶다면, 그 때 도전하면된다.

아무런 분석이나 설계없이 TDD를 하는 것이 아니라 분석 설계를 한 후에 TDD에 들어가야 한다.

#### 요구사항 분석을 철저하게 해야 할 필요성이 있다.

많은 개발자들이 구현이 재밌어서 구현에 바로 뛰어드는 경향이 있다.

TDD는 철저한 분석이 되지 않다면, 막막한 느낌이 있다.

요구사항을 잘 분석한 다음에 투두리스트를 작성하고, 잘게 쪼개야한다.

Todo List를 기반으로 TDD를 시작하면 된다.

TDD가 잘안된다면 요구사항 분석을 더 한다. 그래도 안되면, 그냥 구현을 먼저해본다.

그렇게 해서 그 프로그램에 대한 도메인 지식을 쌓는다. 그런 다음 구현된 모든 코드를 버린다.

그 다음 구현할 기능 목록 작성 또는 도메인 설계를 한다.

기능 중 가장 만만한 기능부터 TDD로 구현을 시작한다.

복잡도가 높아져 리팩토링하기 힘든 상태가 되면 다시 버린다.

반복해서 도전할 때 다른 목표를 구체적으로 가져야 성장한다.

고통이 따르지 않으면 성장하지 않는다. 똑같은 수준의 연습을 반복하지 말고, 지루하고 고통스러움을 참고 반복해서 하다보면, 성장하게된다.

#### 코드를 날리라고 하는 이유

아무 것도 없는 상태에서 새롭게 구현하는 것 보다는 레거시 코드가 있는 상태에서 리팩토링하는 것은 몇 배 더 힘들다.

### 라이브 코딩 시작

투두리스트 작성 및 도메인 설계

프로덕션 테스트 명에 Test를 붙이는 것이 일반적이 관례

테스트 코드는 경계값에 해당하는 것을 사용한다.

인풋이 무엇이 들어갔을 때, 아웃풋이 어떤것이 나올지 고민을 하는 것.

이것이 Unit Test의 핵심

TDD 사이클에서 실패하는 테스트를 만들고, 그 다음 성공하게 한 다음, Refactoring을 한다.

crong이 맘에 안드니 변수명을 고친다.

또 다른 테스트 케이스를 만들어서 실행해본다.

그 다음 리팩토링을 한다. 그리고 상수값을 뽑아낸다.

테스트 케이스가 있으니까 테스트 케이스를 믿고 리팩토링을 한다.

**TDD 테스트 케이스를 구현할 때 검증하는 부분이 들어가야 한다.**

상태가 바뀐 값을 꺼내온 다음에 검증하는 부분이 있어야 한다.

TDD를 구현할 때, Compile 에러를 생소하게 생각하지 않아도 된다.

**단축키를 외워서 사용하자**

copy and paste를 적극적으로 활용한다. 비슷한 구문이 많으므로

랜덤관련 테스트는 어떻게 해야할까? 어떤 경우에는 성공하고 실패하고... 이런 경우는 좋지 않다.

항상 100% 통과하는 테스트를 만들려고 노력해야한다.

**어떻게 하면 테스트 가능한 구조로 만들지 여러분이 고민해야한다.**

테스트 가능한 구조로 설계를 해야한다. 그리고 그렇게 하면 유연한 코드가 작성되게 된다.

Random은 임의로 조작할 수 있도록 바꿀 수 있을까? <= 이게 정말 어려움.

랜덤 숫자를 어떻게 임의로 전달하지? 매개변수로 전달을 받는다, 랜덤 객체를 모킹한다.

**어려운 것을 참고 어떻게 하면 해결할지를 끊임없이 고민하면, 다음에 비슷한 상황을 만났을 때, 그 부분을 극복하는 능력이 쌓이게 된다.**

문제 상황에 부딪히게 만들고 그것을 극복하는 상황을 만든다.

메소드의 시그니처를 바꾸지 않고 극복을 어떻게 할까? 고민을 하다보면 설계역량과 리팩토링 역량이 늘어나게된다.

테스트 코드를 만들다보면 이러한 문제들에 부딪히게 되어있다.

그 문제들을 작은 단위로 쪼개서 풀려고 해본다.

너무 어렵다면 문제들을 어딘가에 기록해뒀다가 다음에 다시 시도해본다.

남에게 의존하지말고 여러분이 직접 문제 상황을 만들어보세요.

객체지향 생활체조 원칙으로 정량적인 문제상황을 만드는 것이 좋다.

도전할 수 있는 정량적인 목표를 세우면 설계를 기존과 다른 설계로 만들 수 있다.

TDD는 문제 상황을 만들게 하기 때문에 어려움에 봉착하는 것을 극복하게 만드는 연습이 가능하다.

프로그래밍을 잘하거나 전문가가 되는 방법은 어려움에 자꾸 부딪히는 것이다.

장기적인 목표를 가지고 여러분의 속도에 맞춰서 스텝 바이 스텝으로 나아가는 것이다.

평생동안 하려면 프로그래밍 자체를 학습하는 것이 즐거워야 한다.

**TDD 저렇게 하는 것이구나 맛을 느꼈으면 좋겠어요.**

### TDD를 하는 이유는?

1. 재밌다. Application을 개발하다보면 100% TDD를 하긴 어려운데, 핑퐁처럼 테스트 패스하고 리팩토링하는 것이 너무 재밌다. 끊임없는 리팩토링을 하다보면 단위테스트가 있어서 마음 껏 할 수 있어서 너무 재밌다.
2. 개발자로 살아가면서 side effect가 어디까지 영향을 미쳐서 불안하게 되는데 안정감을 제공한다.
   TDD가 100% 보장해주진 않는다.
   단위테스트를 나중에 만드는 것은 귀찮고 그래서 안만들기 때문에 TDD가 강제하는 테스트 코드가 좋다.

### QA

Q. 프로덕션 코드 개발시에 작성한 테스트 코드가 동작하지 않는 경우가 있다.

A. 실패하는 테스트 코드를 만드는 원칙을 지키지 않아서 그렇다. ⇒ 프로덕션 코드를 테스트 코드 없이 리팩토링 하지 않는다.

Q. 잘게 쪼개는 것

A. 중복을 제거해서 재사용성을 높이는 것, 변경이 발생했을 때 버그가 발생할 가능성을 줄여준다. 코드의 가독성이 높아지는 것은 뒤따라오지 않을까요? 가독성을 높이려면 이름을 잘 지어줘야 한다.
글을 잘 쓰려면 좋은 글을 읽어야 하듯이, 잘 만들어진 코드를 읽어야 한다.(오픈소스를 많이 읽어보자.)

### 앞으로 할 일

- 학습 테스트
  - 단위 테스트 도구 사용법 익히기
    API가 기대한 대로 동작하는지, 라이브러리 사용법을 익히면서 사용
- 단위 테스트
  - 자동화된 테스트 구현하기
- TDD(리팩토링 포함)
- 장난감 프로젝트 난이도를 높이기
  - 모바일, 웹 애플리케이션
- 레거시 코드 리팩토링
  - 테스트 코드를 미리 작성한다.

TDD는 마음의 여유를 가지고 천천히 진행합시다.

자존감이 떨어져선 안돼요.

정답이 정해져 있는 부분은 혼자 공부하는게 능률이 좋을 수 있다.

하지만 정답이 없는 부분은 혼자 공부한다는게 오히려 틀에 박힌 사고만 하게되기 때문에 더 힘들 수 있다.

내가 성장하고 싶으면 어느 조직의 가장 못하는 사람이 되라

주변의 동기들과 더 친하게 지내면서 소통을 하는것도 좋다.

### 기타 질문

private 메소드를 public 메소드로 변환시 단위테스트를 어떻게 해야 할까?

로직이 커지면, 클래스로 분리해야하지 않을까를 고민해야한다.

### 개발자의 삶, 성장, 로드맵 관련 질문

꾸준히 공부한다는건 어렵다. 공부가 지칠 때는 어떻게 리프레쉬 할까요?

다른 취미활동을 만들거나, 운동같은 육체적인 활동을 한다. 회사에 애정을 가진다.

쉬면서 해야한다. 사실 이거는 5~10년차 개발자고...

잠 5시간 잔다고 죽지않는다. 지금은 미친듯이 하세요.

일정기간 집중 투자하세요. 많은 것을 포기하세요.

주니어 개발자는 지치면 안됩니다. 1~2년차까지는 미친듯이 하세요.

3000으로 갈 때에의 조건은 내가 많이 성장하고 많이 배울 수 있는 곳에서 미친듯이 공부를 한다.

빠르게 이직을 하면서 연봉을 올리세요. 대기업 좋은 회사는 경력이 4~5년 되어서 이직해도 좋다고 생각해요.

좋은 기업의 기준. 주니어 일 때에는 연봉이나 이런 것 보단 많이 성장하고 배울 수 있는 문화를 가진 회사인가가 중요하다.

경력이 쌓이면, 개발자가 중요한지 아는 회사, 수익을 분배하면서 나눠가지는 회사가 좋다고 생각한다.

가장 안좋은 선배, 한 회사에 오래 있으면서 정체되고 있는 개발자들...

알고리즘 못하고, 설계 역량이 조금 떨어져도 프로그래밍을 재밌어해야한다.

그 부분의 역량을 키우려고 노력하고, 그 부분을 강점으로 만들어보자.

삽질은 숙명이고 그것을 즐겨야한다.

