# 2020-06-16-TIL

## 오늘 할 일

- [x] Spring REST Docs 보충
- [x] 스크럼
- [x] 하루 계획 세우기
- [ ] 알고리즘 문제 풀기
- [ ] JPA 강의 듣기
- [ ] 운동하기
- [ ] TDD로 API 개발하기

## 스크럼

- 어제 한 일
    - 백엔드 수업 듣기
    - REST Docs 구현하기
- 오늘 할 일
    - Phase2에 해야할 일 생각해보기
    - API 구현하기(TDD로)
        - TDD 화이팅!
    - Spring REST Docs 보완하기
    - 알고리즘 문제풀기
    - JPA 강의 듣기
- 컨디션
    - 어제보단 좋아졌어요. 그래도 쉬어두려고 합니다!
        - 좋네요!!
- 고민거리
    - 오늘은 꼭 하루 일과를 계획하고 시작해야겠어요!
    - 오늘은 뭐먹지...

## Spring REST Docs 보충

참고자료

- https://jojoldu.tistory.com/294
- https://docs.spring.io/spring-restdocs/docs/2.0.3.RELEASE/reference/html5/
- [https://velog.io/@kingcjy/Spring-REST-Docs를-사용한-API-문서-자동화](https://velog.io/@kingcjy/Spring-REST-Docs%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%9C-API-%EB%AC%B8%EC%84%9C-%EC%9E%90%EB%8F%99%ED%99%94)
- https://github.com/spring-projects/spring-restdocs
- https://woowabros.github.io/experience/2018/12/28/spring-rest-docs.html

배포방식을 변경했다. 그냥 gradle에서만 관리할 수 있도록 했다.

```
dependsOn asciidoctor
from ("${asciidoctor.outputDir}/html5") {
    into 'static/docs'
}
```

이렇게 하면 보이지는 않는데 jar 파일 안에 static/docs라는 경로가 생긴다.

```
copy {
    from "${asciidoctor.outputDir}/html5"
    into 'static/docs'
}
```

이거는 내 로컬에 복사한다....

그리고 snippets가 없다고 나오는 오류는

`:snippets: ../../../build/generated-snippets` 로 해결하던가

```
asciidoctor {
    inputs.dir snippetsDir
    attributes "snippets": snippetsDir
    dependsOn test
}
```

이렇게 해결하면 되더라...

## 오늘의 계획

한 4뽀모도로 정도는 API 개발에 투자를 해야할 것 같다.

JPA 강의를 먼저 듣는다.

그 후 API 개발을 TDD로 한다.

알고리즘 문제 2문제 각각 1뽀모도로씩 해서 1시간

운동을 밥먹기 전에 한다.

## TDD로 API 개발하기

JPA에서 Entity관련해서는 어떻게 테스트하는지 궁금하다...

그래서 강의를 먼저 듣기로 했다.

## Data JPA 강의 듣기

- 스프링 부트 스타터 사용

- 그레이들 사용

- 언어는 자바 사용

- 스프링 부트 버전은 나는 상관없어서 2.3.x를 사용

  - groupId: jpabook
  - artifactId: jpashop
  - 의존성: web, thymeleaf, jpa, h2, lombok
  - 요즘엔 jsp를 잘 안씀.
  - Spring이랑 JPA를 가지고 어떻게 Application을 만드지를 알아야 한다.
    - Spring Data JPA를 사용하는 것은 JPA에 대해서 깊이 알고 Spring Data JPA는 도움용으로 쓰는 것을 추천

  - H2는 개발이나 테스트 할 때 참 좋음.
    - 간단간단하게 교육용으로 사용함
  - lombok: 지루한 반복성 코드를 줄여준다.

Spring Boot가 해주는 일 라이브러리의 버전 관리까지 알아서 해준다.

롬복때문에 생긴 세팅

```
configurations {
    compileOnly {
        extendsFrom annotationProcessor
    }
}
```

Gradle은 의존하는 라이브러리를 다 땡겨온다.

예전에 Spring Boot 없을 때에는 세팅하는데 1주일 정도 걸렸던 것 같다...

강의는 다 따라서 쳐보는 것을 추천함.

### 스프링 부트 라이브러리 살펴보기

`./gradlew dependencies`

의존관계를 다 보여준다.

근데 보기 너무 힘듦...

스프링 부트 스타터 웹에는

- 스프링 부트 스타터 톰캣이 들어있다.
- Spring Framework webmvc 5.2.7를 임포트한다.
- Spring Framewrok web 5.2.7도 임포트한다.

타임리프도 마찬가지로 필요한 의존성을 추가하고

가장 중요한 JPA 스타터는 다음의 의존성을 추가한다.

- aop
  - starter
    - logging
      - logback
      - log4j2
      - slf4j
    - spring boot
      - spring-core
- jdbc
  - Hikari CP
  - transaction
- hibernate 5.4.17 버전

테스트

Spring boot starter test

- JUnit5
- spring-test
- mockito
- assertJ

### 핵심 라이브러리

- 스프링 MVC
- 스프링 ORM
- JPA, 하이버네이트
- 스프링 데이터 JPA

#### 기타 라이브러리

- H2는 1.4.199를 사용합시다.
- 커넥션 풀: 부트 기본은 Hikari CP
- WEB(thymeleaf)
- 로깅 Slf4j & LogBack
- 테스트

참고로 스프링 데이터 JPA는 스프링과 JPA를 먼저 이해하고 사용해야 하는 응용기술이다.

### View 환경 설정

