# 2020-04-22-TIL

## 오늘 할 일

- [x] 병원 가기
- [x] 코드스쿼드 OAuth 공통 수업
- [x] 회고 및 스크럼(작성해서 Wiki로 남기기)
- [x] 백엔드 프로그래밍

## 코드스쿼드 수업

http는 무상태성(stateless)

누군지 알 수 있는 방법(대안)

IP

User-Agent

### 쿠키

쿠키 헤더에 넣어서 누구인지 알려줌(상태)

패킷에서 보이기 때문에, 보안상으로 문제 있는 데이터는 넣으면 안 됨!

쿠키에 대한 핸들링은 브라우저, 모바일 앱에서 컨트롤 함.

### 세션

서버에서 만든 그 사용자에 대한 정보를 담는 것

쿠키에서 세션에 대한 정보를 담는다.

세션에 대한 **타임아웃**을 정해주는게 보안상 유리함

보안과 사용성은 반대되는 개념이지만, 그래도 사용성을 높이는게 좋다.

세션은 보통 Redis같은 In-memory DB에 저장한다.

HTTP Session을 공부하자

세션을 공유해야 할 필요가 있음(로드 밸런싱이 들어가면..)

### 쿠키와 세션의 보안

우리나라의 인터넷 뱅킹은 굉장히 빡빡한 편임.

외국은 Personal Computer에 대한 인식이 우리나라와 다름

만료일에 대한 정책을 세워야 함.

특정 도메인에 대한 설정하기

https에서만 동작하도록 설정(secure)

시큐어 코딩

### 웹 보안

웹으로 중요한 데이터를 공유하지 않으면 보안은 필요 없음.

안전한가? 방어적인가? 에 대한 고민이 먼저임.

안전한 웹을 위한 세가지

1. 중간에서 누군가 데이터를 변경시킬 수 있다.(무결성-integrity)
2. 누가 훔쳐볼 수 있다는 점.(암호화-encryption)
3. 다른 사람인 척 할 수 있다는 점.(인증-authentication)

TLS, SSL(Secure Layer)

비대칭 암호화(공개키 암호화)

개인키를 암호화 하는 경우도 있음.

### 웹 서비스 동작방식의 변화

요즘엔 SPA(Single Page Application)가 대두되면서 REST-API를 사용.

서버는 State-less가 맞는게 아닐까? API에 대한 요청만 확인하면 되지 않을까?

세션을 동기화하고 공유하는 문제도 해결되지 않을까?

토큰기반 인증과 쿠키-세션 기반 인증은 전체적으로 봤을 때 큰 차이가 없다.

### OAuth

Client, User, Service Provider

로그인 버튼 누르면, 우리서버에서 Provider로 요청 전달

3자 확인이 들어가서 복잡해짐.

## 회고 및 스크럼

**어제 한 일**
- DB 데이터 이동
- OAuth Github에서 AccessToken발급받는 것 까지 구현(Solar)
    - Github으로 부터 user의 email 받아와서 User DB에 넣는 부분은 나중에 해볼지 고민
- Jasypt Encryptor 구현 암호화 하는거(Dion)
- 암호화된 정보로 DB Access 할 수 있도록 설정(Dion)
- 백엔드 요구사항 정리(API url 규격)

**오늘 할 일**
- 오늘부터 API를 만듭니다 ^^7
- (Solar) 상세페이지 API
- 도메인 객체를 만들까요?

## Solar OAuth 구현 같이 고치기

코드를 같이 보면서 수정이 필요한 부분을 같이 고쳤다.

전체적으로 좀 더 깔끔한 코드가 된 것 같아서 만족했다.

- Spring HttpEntity 공부
  - MultiValueMap? 공부
- scp 공부

오타를 못잡았다 아쉽다 ㅠ

## 백엔드 프로그래밍

쿼리를 먼저 짜놓고, 거기에 맞춰서 프로그래밍을 했다.

나나, 솔라나 다 이 방식이 좀 더 머리가 덜 아프고 빠르게 개발된다고 생각하는 것 같다.

어제 그 오해가, 나는 이렇게 프로그래밍 하는 방식이 익숙했지만, 솔라는 해본 경험이 없어서 그랬던 거였다.

오해가 풀려서 다행이라고 생각했다.

```
dto: DishDetailDto{topImage='http://public.codesquad.kr/jk/storeapp/data/detail/HBDEF/4cce011a4a352c22cd399a60271b4921.jpg', description='일본인의 소울푸드! 한국인도 좋아하는 소고기덮밥', point='70원', deliveryInfo='서울 경기 새벽배송 / 전국택배 (제주 및 도서산간 불가) [월 · 화 · 수 · 목 · 금 · 토] 수령 가능한 상품입니다.', deliveryFee='2,500원 (40,000원 이상 구매 시 무료)', normalPrice='6,500원', salePrice='7,000원', thumbImages=null, detailSectionImages=null}
```

잘 온다 ^^

이 과정에서, mysql 서버 시간 설정을 바꾸었는데 내일 꼭 정리하자

## 오늘의 회고

오늘 아침에 병원간다고 일찍 일어나서 좀 피곤했다.

어제 백엔드끼리 협업하는 것도 트러블이 조금 있었고, 수업에 늦어서 뛰었는데, 막상 수업이 알고 있는 내용을 하고 있어서 기분이 더 안좋아진 것 같다.

하지만, 스크럼을 하고, OAuth가 정상적으로 동작하는 것을 확인하고, (물론 거기서 또 의견차이는 있었지만 ^^)

OAuth 코드를 리뷰해가면서 수정하고, 쿼리도 같이 짜면서 다시 관계를 회복한 것 같다.

아마 솔라가 많이 양보해주시고, 신경써주신 것 같다고 느끼고 있다.

오늘은 코드를 거의 안짰지만, 프로그래밍 외적으로 많이 성장했다고 생각했다.

그리고, 부족한 점을 정리하고 Things에 올려두고 안까먹게 하는게 좋은 것 같다.

열심히 하자! 화이팅!

## 내일 할 일

- [ ] 회고 및 스크럼
- [ ] 백엔드 프로그래밍
- [ ] 스프링 공부
- [ ] mysql 서버 시간 설정 정리해서 기록하기

