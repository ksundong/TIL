# 2020-05-17-TIL

## 오늘 할 일

- [ ] 알고리즘 문제풀기
- [ ] 지난 프로젝트 코드 돌이켜보기
- [x] AWSome Day 웨비나 듣기

## AWSome Day

### 클라우드란 무엇인가?

클라우드는 온프레미스와 대비되는 개념으로

온프레미스는 어떤 데이터센터를 전용으로 소유하고, 서버, 스토리지, DB, 어플리케이션을 직접 운영하는 것

클라우드 서비스 공급자가 공급하는 서비스를 그 때 그 때 필요한 만큼만 이용하고 사용료를 내는 방식

클라우드는 AWS같은 서비스 사업자가 네트워크를 통해서 컴퓨팅 파워를 이용할 수 있도록 제공

고객은 필요한 항목을 프로비저닝해서 사용할 수 있음.

클라우드 배포 모델은 온프레미스, 하이브리드, 클라우드가 있음.

### AWS 클라우드를 사용하면 얻는 이점

자본 비용을 가변 비용으로 대체 ⇒ 필요한 만큼만 서버를 생성해서 사용할 수 있음.

규모의 경제 ⇒ 개별적으로 구축해서 사용하는 것 보다, 큰 회사가 세운 인프라를 이용한다면 규모의 경제를 이용가능
가격, 성능, 보안에 대한 이점 모든 고객들이 같이 누릴 수 있음.

용량 추정이 불필요 ⇒ 어떠한 예측에 따라서 구축하고, 운영을 할 필요가 없음. 그 때 그 때 필요한 만큼 축소 확장 가능

속도 및 대응력이 향상됨 ⇒ 바로바로 사용할 수 있는 상태가 됨.

**최소 비용으로 업무 영역에 집중할 수 있게 된다.**

### AWS 보안

개별적으로 유지하는 것보다 더 나은 보안 서비스와 인프라를 제공

데이터를 안전하게 보관하기 위한 장치. AWS 데이터 센터에 저장됨

보안에 매우 민감한 고객이 원하는 것을 충족하기에 다른 사용자도 누릴 수 있다.

확장을 하면서 보안을 유지할 수 있도록 설계가 되어있어서 좋다.

### AWS 범주

보통의 서비스는 사용한 만큼만 과금되는 종량요금제

사용자는 프로비저닝을 해서 조합해서 사용할 수 있다.

### AWS 글로벌 인프라

AWS 리전: 내결함성, 안정성 때문에 각 리전은 서로 분리됨, **AWS는 설정하지 않으면 자동으로 리전간에 리소스를 복제하지 않음.**

각 리전은 데이터 센터의 클러스터인 가용영역으로 구분된다. 가용영역은 지연시간이 짧은 링크를 통해서 연결되어 있음.

사용자가 가용영역을 직접 선택하거나, AWS에서 자동으로 선택하도록 할 수 있다.

인스턴스가 장애가 발생하더라도 다른 인스턴스에서 대응할 수 있도록 구성할 수도 있다.

어떤 리전을 선택할 것인가?

- 데이터 거버넌스, 법적 요구사항: 지역에 위치해야 할 필요가 있는 경우
- 고객에 대한 근접성: 레이턴시
- 리전에서 제공하는 서비스: 리전별로 제공하는 서비스가 다를 수 있음
- 리전별 비용이 다를 수 있음

#### 엣지 로케이션: 원거리 고객에게 도달

지연시간을 줄이기 위해

엣지 로케이션은 사용자가 AWS 리소스에 빠르게 접근하기위한 네트워크적인 엔드포인트로써의 역할

Cloud Front(컨텐츠 전송), Route53(DNS)

### AWS 관리 인터페이스

1. AWS Management Console: 웹환경에서 사용하기 손쉽게 구성됨
   - 모바일 앱도 제공, 간단한 활용 가능(모니터링)
2. AWS CLI: 명령줄 인터페이스(쉘 스크립트 작성 가능)
   - 오픈 소스(파이썬 SDK 기반)
   - 최소한의 구성으로 원하는 프로그램을 만들 수 있다.
3. SDK: 코드로 서비스에 액세스
   - JS, Python, PHP, .NET, Ruby, Go, Node.js, C++, Java, IOT
   - Programming을 통한 Infra IAC
   - AWS 서비스를 Code로 조절 가능

### 동영상이 자꾸 끊겨서 보기 힘들었다. 아마존 실망이다.

### AWS 인프라 구축

EC2: 클라우드에서 안전하고 크기조정 가능한 컴퓨팅 파워를 제공

물리적 서버에서 제공되는 것과 동일한 기능을 클라우드상에서도 동일하게 제공

### EC2의 이점

- 탄력성: Auto-Scailing도 가능
- 제어: 필요에 따라 중지하고 재시작 가능
- 유연성: 여러 인스턴스 유형을 제공, 운영체제, 패키지 제공
- 통합: 다른 AWS 서비스와 통합 가능
- 안정성: 99.99% 가용성
- 보안: AWS VPC와 연동하여 계층적 보안 가능
- 저렴한 비용: 탄력적 Architecture 구성으로 비용 절감 가능
- 용이성: 쉽게 핸들링 가능

#### [인스턴스 유형](https://aws.amazon.com/ec2/instance-types)

적합한 Amazon EC2 인스턴스 선택

요구사항에 맞춰서 리소스를 최적으로 조정할 수 있음

**빨리 처리하고 쉬기(HUGI)**: 큰 인스턴스로 빨리 처리하는 것이 작은 인스턴스를 오래 돌리는 것 보다 나을 수도 있음.

- **C5n**: 컴퓨팅 최적화 인스턴스(배치 작업 등) -- 설명이 많았음
- R5: 메모리 최적화 인스턴스(메모리 대 vCPU 비율이 8:1) 메모리를 많이 요구한다면 고려
- z1d: 특별한 워크로드를 위한 고성능 인스턴스(고성능을 요구할 경우 이용)
- M5:차세대 범용 인스턴스
- T3: 차세대 범용 인스턴스(시간당 가장 낮은 비용) T2대비 더 저렴

#### EC2 플랫폼

AMI(Amazon Machine Image): 플랫폼별로 제공

블록 디바이스?

#### 데이터 저장

##### EBS(Amazon Elastic Block Store)

- 인스턴스용 영구 블록 스토리지
- 복제를 통해 보호됨
- 상이한 드라이브 유형 (SSD(뛰어난 IOps), HDD)
- 몇 분 만에 확장 또는 축소
- 프로비저닝한 만큼만 비용 지불
- 스냅샷 기능(볼륨의 특정시점 스냅샷 가능), 특정 리전으로 복사가능
- 암호화 사용 가능

##### Amazon S3

- 데이터는 버킷 내에 객체로 저장됨(읽기, 쓰기, 삭제, 검색 등이 가능)
- 무제한 스토리지
  - 단일 객체는 5TB로 제한됨
- 99.999999999% 11nine 내구성
- 버킷 및 객체에 대한 세분화된 액세스
- 객체에 대해 빠르고 내구성과 가용성이 높은 키 기반 액세스
- 데이터를 저장 및 검색하도록 구축된 객체 스토리지
- 이용
  - 백업 및 스토리지
  - 애플리케이션 호스팅(웹 애플리케이션)
  - 미디어 호스팅
  - 소프트웨어 전송
- 단순한 스토리지 버킷이 아님
  - 요청자 지불(버킷 소유자 대신 요청자가 데이터 다운로드 및 비용을 제공) - Dropbox인듯
  - 버전 관리(모든 버전의 모든 버킷을 보존, 검색, 복구가 가능함)
  - 정적 웹 사이트 호스팅(웹서버 구축하지 않고 호스팅이 가능)
  - 객체 수명 주기 관리(객체 만료, 보관이 포함됨) - 객체를 요구사항 및 데이터 액세스 패턴에 맞는 곳으로 이동시킬 수 있음

##### Amazon S3 Glacier

- 매우 저렴한 데이터 보관 및 장기 백업용, 11nine 안정성, 엄격한 규제 요구사항을 준수하는 보안, 규정준수 기능 제공
- 아카이브에 액세스하는 신속검색, 표준검색, 대량검색의 세가지 옵션 제공
- Amazon S3 수명주기 규칙을 이용해 같이 구성될 수 있음
  - S3에 올린 Data가 30일 뒤에 Glacier로 이동되고 5년뒤에 삭제되는 사용사례
- 사전 협약금 없음, 유지관리 비용 없음

##### Amazon S3 Glacier 볼트 잠금 정책

- 규정 준수 제어 기능
- Valut는 한 번 잠기면 수정할 수 없음

S3 스토리지는 사용목적 별로 다르게 선택하는게 좋겠다!

### VPC

가상 네트워크 서비스

- 서브넷, 라우터 등의 기능을 제공함
- 가상 네트워킹 환경을 제어 가능
- 보안 그룹(서브넷 내부에서도 나눌 수 있음)
  - 인바운드, 아웃바운드 별로 설정 가능
  - 허용만 가능, 거부는 없음
  - 보안그룹은 인바운드 규칙이 Default로 모두 허용하지 않음, 아웃바운드 허용
  - 인바운드 트래픽의 응답을 허용함(?)

